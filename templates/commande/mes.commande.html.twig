{% extends 'base.html.twig' %}

{% block title %}Hello CommandeController!
{% endblock %}

{% block body %}
	<style>

		.retour {
			margin-top: 1%;

		}
		.retour a:not(.payer) {
			color: #e04218;
		}
		h3 {
			color: #000;
		}
		.etat {
			position: absolute;
			top: 0;
			padding: 5px;
			left: 1px;
			background: #ddd;
			font-size: 15px;
		}
		.payer {
			float: right;
			color: #fff;
			margin-top: -0.5%;
		}
	</style>
	<!-- popular section starts  -->
	{% for message in app.flashes('add_commande') %}
		<div class="alert alert-danger" id="add_commande" style="background-color: #adeace;padding:10px;text-align:center;border-radius:5px;margin-bottom:5px;">
			{{ message }}
		</div>
	{% endfor %}
	{% for message in app.flashes('paiement') %}
		<div class="alert alert-danger" id="add_commande" style="background-color: #adeace;padding:10px;text-align:center;border-radius:5px;margin-bottom:5px;">
			{{ message }}
		</div>
	{% endfor %}
	<section class="retour" id="">

		<a href="{{path('catalogue')}}">
			<i class="fa-solid fa-reply fa-1x"></i>
			catalogue
		</a>
		<a class="payer btn" href="{{path('payer')}}">
			Payer une commande
			<i class="fa-solid fa-money-bill-transfer"></i>
		</a>
	</section>

	<section class="popular" id="popular">

		<div class="heading">
			<span>popular food</span>
			<h3>Mes Commandes</h3>
		</div>

		<div
			class="form-filtre">
			{# <form method="POST" action="{{path('commande_filtre_by_etat')}}"> #}
			<div class="col-md-2">
				<label>Filter les commandes :</label>
				<select class="form-select" id="select-etat" aria-label="Default select example">
					<option value="encours" {% if etatSelected is defined %} {% if etatSelected == 'encours' %} selected="selected" {% endif %} {% endif %} data-path="{{ path('commande_filtre_by_etat',{etat:'encours'})}}">En cours</option>
					<option value="valider" {% if etatSelected is defined %} {% if etatSelected == 'valider' %} selected="selected" {% endif %} {% endif %} data-path="{{ path('commande_filtre_by_etat',{etat:'valider'})}}">Valider</option>
					<option value="annuler" {% if etatSelected is defined %} {% if etatSelected == 'annuler' %} selected="selected" {% endif %} {% endif %} data-path="{{ path('commande_filtre_by_etat',{etat:'annuler'})}}">Annuler</option>
				</select>
			</div>
			{# </form> #}
		</div>

		<div class="box-container">
			{% for commande in commandes %}

				{% for Cburger in commande.burger %}

					<div class="box" data-aos="fade-up" data-aos-duration="3000">
						<div class="image">
							<img src="{{asset('img/uploads/' ~ Cburger.image.nom)}}" class="animate__backInUp" alt="">
						</div>
						<div class="content">
							<h3>{# {{Cburger.quantity}} #}x
								{{Cburger.nom}}</h3>
							{% if commande.etat == 'encours' %}
								<div class="etat" style="background:yellow;">
									{{commande.etat}}
								</div>
							{% endif %}
							{% if commande.etat == 'valider' %}
								<div class="etat" style="background:green;">
									{{commande.etat}}
								</div>
							{% endif %}
							{% if commande.etat == 'terminer' %}
								<div class="etat" style="background:#ddd;">
									{{commande.etat}}
								</div>
							{% endif %}
							{% if commande.etat == 'annuler' %}
								<div class="etat" style="background: red;">
									{{commande.etat}}
								</div>
							{% endif %}

							<div class="stars">
								commande :
								{{commande.numero}}
							</div>
							<div>
								le
								{{commande.date|date('d/m/Y')}}

							</div>
							<a href="{{path('details_commande',{id:commande.id})}}" disabled class="btn">Details</a>


						</div>
					</div>
				{% endfor %}

				{% for CMenu in commande.menu %}

					<div class="box" data-aos="fade-up" data-aos-duration="3000">
						<div class="image">
							<img src="{{asset('img/uploads/' ~ CMenu.image.nom)}}" class="animate__backInUp" alt="">
						</div>
						<div class="content">
							<h3>{# {{CMenu.quantity}} #}x
								{{CMenu.nom}}</h3>
							{% if commande.etat == 'encours' %}
								<div class="etat" style="background:yellow;">
									{{commande.etat}}
								</div>
							{% endif %}
							{% if commande.etat == 'valider' %}
								<div class="etat" style="background:green;">
									{{commande.etat}}
								</div>
							{% endif %}
							{% if commande.etat == 'terminer' %}
								<div class="etat" style="background:#ddd;">
									{{commande.etat}}
								</div>
							{% endif %}
							{% if commande.etat == 'annuler' %}
								<div class="etat" style="background: red;">
									{{commande.etat}}
								</div>
							{% endif %}
							<div class="stars">
								commande :
								{{commande.numero}}
							</div>
							<div>
								le
								{{commande.date|date('d/m/Y')}}

							</div>
							<a href="{{path('details_commande',{id:commande.id})}}" disabled class="btn">Details</a>

						</div>
					</div>
				{% endfor %}
				{% for CComp in commande.complement %}

					<div class="box" data-aos="fade-up" data-aos-duration="3000">
						<div class="image">
							<img src="{{asset('img/uploads/' ~ CComp.image.nom)}}" class="animate__backInUp" alt="">
						</div>
						<div class="content">
							<h3>{# {{CMenu.quantity}} #}x
								{{CComp.nom}}</h3>
							{% if commande.etat == 'encours' %}
								<div class="etat" style="background:yellow;">
									{{commande.etat}}
								</div>
							{% endif %}
							{% if commande.etat == 'valider' %}
								<div class="etat" style="background:green;">
									{{commande.etat}}
								</div>
							{% endif %}
							{% if commande.etat == 'terminer' %}
								<div class="etat" style="background:#ddd;">
									{{commande.etat}}
								</div>
							{% endif %}
							{% if commande.etat == 'annuler' %}
								<div class="etat" style="background: red;">
									{{commande.etat}}
								</div>
							{% endif %}
							<div class="stars">
								commande :
								{{commande.numero}}
							</div>
							<div>
								le
								{{commande.date|date('d/m/Y')}}

							</div>
							<a href="{{path('details_commande',{id:commande.id})}}" disabled class="btn">Details</a>


						</div>
					</div>
				{% endfor %}

			{% else %}
				tableau vide .........
			{% endfor %}


		</div>

		{% if etatSelected is not defined %}
			{# <div class="p" style="">
																																		<div class="pagination">
																																			{{ knp_pagination_render(commandes,'./pagination.twig') }}
																																		</div>
																																	</div> #}
		{% endif %}
	</section>

	<!-- popular section ends -->
	<!-- banner section starts  -->

	<section class="banner">

		<div class="row-banner">
			<div class="content">
				<span>double cheese</span>
				<h3>burger</h3>
				<p>with cococola and fries</p>
				<a href="#" class="btn">order now</a>
			</div>
		</div>

	</section>

	<!-- banner section ends -->
	<!-- order section starts  -->

	<section class="order" id="order">

		<div class="heading">
			<span>order now</span>
			<h3>fastest home delivery</h3>
		</div>

		<div class="icons-container">

			<div class="icons">
				<img src="{{asset('img/image/icon-1.png')}}" alt="">
				<h3>7:00am to 10:30pm</h3>
			</div>

			<div class="icons">
				<img src="{{asset('img/image/icon-2.png')}}" alt="">
				<h3>+123-456-7890</h3>
			</div>

			<div class="icons">
				<img src="{{asset('img/image/icon-3.png')}}" alt="">
				<h3>mumbai, india - 400104</h3>
			</div>

		</div>

		<iframe src="https://www.google.com/maps/embed?pb=!1m23!1m12!1m3!1d63612502.52014224!2d-11.285175924981752!3d13.312969429018338!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!4m8!3e6!4m0!4m5!1s0xec173c21564c333%3A0x504d9e7bb5384f5a!2sEcole%20221%2C%20Dieuppeul%201%20Villa%20en%20face!3m2!1d14.716926299999999!2d-17.45194!5e0!3m2!1sfr!2ssn!4v1652188228495!5m2!1sfr!2ssn" width="1240" height="400" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
	</section>


	<!-- order section ends -->
	<!-- footer section starts  -->

	<section class="footer">


		<div class="box-container">

			<div class="box">
				<h3>our menu</h3>
				<a href="#">
					<i class="fas fa-arrow-right"></i>
					pizza</a>
				<a href="#">
					<i class="fas fa-arrow-right"></i>
					burger</a>
				<a href="#">
					<i class="fas fa-arrow-right"></i>
					chicken</a>
				<a href="#">
					<i class="fas fa-arrow-right"></i>
					pasta</a>
				<a href="#">
					<i class="fas fa-arrow-right"></i>
					and more...</a>
			</div>

			<div class="box">
				<h3>quick links</h3>
				<a href="#home">
					<i class="fas fa-arrow-right"></i>
					home</a>
				<a href="#about">
					<i class="fas fa-arrow-right"></i>
					about</a>
				<a href="#popular">
					<i class="fas fa-arrow-right"></i>
					popular</a>
				<a href="#menu">
					<i class="fas fa-arrow-right"></i>
					menu</a>
				<a href="#order">
					<i class="fas fa-arrow-right"></i>
					order</a>
				<a href="#blogs">
					<i class="fas fa-arrow-right"></i>
					blogs</a>
			</div>

			<div class="box">
				<h3>extra links</h3>
				<a href="#">
					<i class="fas fa-arrow-right"></i>
					my order</a>
				<a href="#">
					<i class="fas fa-arrow-right"></i>
					my account</a>
				<a href="#">
					<i class="fas fa-arrow-right"></i>
					my favorite</a>
				<a href="#">
					<i class="fas fa-arrow-right"></i>
					terms of use</a>
				<a href="#">
					<i class="fas fa-arrow-right"></i>
					privary policy</a>
			</div>

			<div class="box">
				<h3>opening hours</h3>
				<p>monday : 7:00am to 10:00pm</p>
				<p>tuesday : 7:00am to 10:00pm</p>
				<p>wednesday : 7:00am to 10:00pm</p>
				<p>friday : 7:00am to 10:00pm</p>
				<p>saturday and sunday closed</p>
			</div>

		</div>

		<div class="bottom">

			<div class="share">
				<a href="#" class="fab fa-facebook-f"></a>
				<a href="#" class="fab fa-twitter"></a>
				<a href="#" class="fab fa-instagram"></a>
				<a href="#" class="fab fa-linkedin"></a>
				<a href="#" class="fab fa-pinterest"></a>
			</div>

			<div class="credit">
				created
				<span>mr. Libasse Laye Mbaye</span>
				| all rights reserved!
			</div>

		</div>

	</section>

{% endblock %}
{% block javascripts %}
	{{parent()}}
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

	<script>

		$(function () {
$(document).on('change', '#select-etat', function () {
const path = $(this).find(':selected').data('path');
$.ajax({
url: path, type: "GET", dataType: 'JSON', // or html or whatever you want
success: function (data) {
window.location.href = data
}
});

})
});
setTimeout(function () {
$('#add_commande').fadeOut('fast');
}, 1000); // <-- time in milliseconds
	</script>
{% endblock %}
